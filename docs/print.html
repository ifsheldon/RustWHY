<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>RustWHY</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="face.html"><strong aria-hidden="true">1.</strong> å°é¢</a></li><li class="chapter-item expanded "><a href="preface.html"><strong aria-hidden="true">2.</strong> é¦–é¡µ</a></li><li class="chapter-item expanded "><a href="engineering_features/opening.html"><strong aria-hidden="true">3.</strong> å·¥ç¨‹ç‰¹æ€§</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="engineering_features/why_associated_type.html"><strong aria-hidden="true">3.1.</strong> ä¸ºä»€ä¹ˆè¦æœ‰ Associate Typeï¼Ÿå®ƒå’Œæ™®é€šçš„æ³›å‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ol></li><li class="chapter-item expanded "><a href="design_choices/opening.html"><strong aria-hidden="true">4.</strong> è®¾è®¡é€‰æ‹©</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design_choices/why_not_inheritance.html"><strong aria-hidden="true">4.1.</strong> ä¸ºä»€ä¹ˆæ²¡æœ‰ç»§æ‰¿ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="design_choices/why_not_global_variable.html"><strong aria-hidden="true">4.2.</strong> ä¸ºä»€ä¹ˆæ²¡æœ‰å…¨å±€å˜é‡ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="design_choices/why_not_overloading.html"><strong aria-hidden="true">4.3.</strong> ä¸ºä»€ä¹ˆæ²¡æœ‰é‡è½½ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="design_choices/why_not_parameter_defaults.html"><strong aria-hidden="true">4.4.</strong> ä¸ºä»€ä¹ˆæ²¡æœ‰ç¼ºçœå‚æ•°ï¼Ÿ</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">RustWHY</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <center>
<img src="face.jpeg" alt="face" style="zoom:120%;" />
</center>
<center> Generated by <a href="orly.nanmu.me">orly.nanmu.me</a> </center>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="rust-åä¸‡ä¸ªä¸ºä»€ä¹ˆ"><a class="header" href="#rust-åä¸‡ä¸ªä¸ºä»€ä¹ˆ">Rust åä¸‡ä¸ªä¸ºä»€ä¹ˆ</a></h1>
<p>è¿™é‡Œæ•´ç†äº†ä¸€äº› Rust ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œå¹¶ä¸”å°è¯•è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦è¿™äº›ç‰¹æ€§ã€‚</p>
<p>è¿™é‡Œä¸å›ç­” â€œWhy Rust?â€ è€Œæ˜¯å¸Œæœ›æ±‡é›†ä¸€äº›å¯¹ Rust çš„æ€è€ƒã€‚</p>
<h2 id="å£°æ˜"><a class="header" href="#å£°æ˜">å£°æ˜</a></h2>
<p>è¿™é‡Œçš„æ€è€ƒä»…ä»…æ˜¯ä¸ªäººçš„æƒ³æ³•ï¼Œä¸ä»£è¡¨ Rust å®˜æ–¹çš„æ„è§ï¼Œæ›´ä¸ä»£è¡¨ Rust ç¤¾åŒºçš„æ„è§ã€‚</p>
<p>æƒå¨è¯·å‚è§ <a href="https://rust-lang.github.io/rfcs/">Rust RFC Book</a> ä»¥åŠå’¨è¯¢ Rust æ ¸å¿ƒå¼€å‘è€…ã€‚</p>
<h2 id="è´¡çŒ®"><a class="header" href="#è´¡çŒ®">è´¡çŒ®</a></h2>
<p><a href="https://github.com/ifsheldon/RustWHY">Github Repo</a></p>
<p>å¦‚æœæƒ³è´¡çŒ®åˆ°è¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>å†™æ–‡ç« ï¼šè¯·å°½é‡æœ‰ç†æœ‰æ®ã€‚å†™å¥½ä¹‹åæ PRï¼Œé€šè¿‡ä¹‹åå°±å¯ä»¥ç½²åå‘è¡¨ã€‚</li>
<li>ç¾åŒ–ç½‘ç«™ï¼šç›®å‰æˆ‘è¿˜æ˜¯åœ¨ç”¨ç®€é™‹çš„ mdbookï¼Œä½†æ˜¯å¦‚æœæœ‰äººè§‰å¾—ä¸å¥½çœ‹ï¼Œå¯ä»¥å¸®å¿™ä½¿ç”¨æ›´å…ˆè¿›çš„å‰ç«¯æ¡†æ¶ç¾åŒ–ã€‚</li>
<li>æ Feature Requestï¼šè§‰å¾—æœ‰æ„æ€çš„é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡æ Feature Request çš„å½¢å¼æé—®ï¼Œä½†æ˜¯ä¹Ÿå»ºè®®è‡ªå·±å°è¯•æœç´¢/æ¢ç´¢/ç†è§£ä¹‹åå†™æ–‡ç« ã€‚</li>
<li>ç¿»è¯‘ï¼šç›®å‰ä»…æœ‰ä¸­æ–‡ç‰ˆï¼Œå¦‚æœä½ è§‰å¾—æœ‰å¸®åŠ©å¹¶ä¸”æ„¿æ„è´¡çŒ®ï¼Œä¹Ÿå¯ä»¥å¸®å¿™ç¿»è¯‘æˆåˆ«çš„è¯­è¨€ã€‚</li>
<li>é‚€è¯·å¤§ç‰›å†™æ–‡ç« </li>
<li>åˆ†äº«</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="å·¥ç¨‹ç‰¹æ€§"><a class="header" href="#å·¥ç¨‹ç‰¹æ€§">å·¥ç¨‹ç‰¹æ€§</a></h1>
<p>Rust æœ‰å¾ˆå¤šå¥‡ç‰¹çš„å·¥ç¨‹ç‰¹æ€§ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°å†™ä»£ç ï¼ŒåŒæ—¶å°½é‡ç¬¦åˆé«˜è´¨é‡çš„å·¥ç¨‹å®è·µè¦æ±‚ã€‚</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="ä¸ºä»€ä¹ˆè¦æœ‰-associated-type"><a class="header" href="#ä¸ºä»€ä¹ˆè¦æœ‰-associated-type">ä¸ºä»€ä¹ˆè¦æœ‰ Associated Typeï¼Ÿ</a></h1>
<h2 id="èƒŒæ™¯"><a class="header" href="#èƒŒæ™¯">èƒŒæ™¯</a></h2>
<p>ä»€ä¹ˆæ˜¯ Associated Typeï¼Ÿ</p>
<p>Associated Type æ˜¯æ³›å‹çš„ä¸€ä¸ªå­æ¦‚å¿µã€‚åœ¨ Rust é‡Œ Associated Type å’Œ Trait ç»‘å®šåœ¨ä¸€èµ·ï¼ŒæŒ‡å®šè¾“å‡ºç±»å‹ (output type)ã€‚</p>
<p>Rust Book é‡Œçš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼š</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Iterator {
    type Item;
    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;
}

impl Iterator for Counter {
    type Item = u32;

    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {
        // --snip--
<span class="boring">}
</span></code></pre></pre>
<p>è¿™æ ·å†™ï¼Œ<code>Counter</code>é‡Œçš„<code>Self::Item</code>å°±æŒ‡ä»£çš„æ˜¯<code>u32</code>ã€‚</p>
<p>è€Œæ›´è¯¦ç»†çš„ä»‹ç»è¯·çœ‹<a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html">Rust Book å¯¹åº”ç« èŠ‚</a>ã€‚</p>
<h2 id="ç­”æ¡ˆ"><a class="header" href="#ç­”æ¡ˆ">ç­”æ¡ˆ</a></h2>
<p>çŸ­ç­”æ¡ˆæ˜¯ï¼š</p>
<ul>
<li>å¸¦æœ‰ Associated Type çš„ Trait åªèƒ½è¢«ä¸€ä¸ªç±»å‹<code>impl</code> ä¸€æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥é¿å…ä¸€ä¸ªç±»å‹æœ‰å¤šä¸ª<code>impl</code>ã€‚</li>
<li>Associated Type å¯ä»¥å½“åš Output Type</li>
<li>Associated Type å¸¦æ¥å·¥ç¨‹ä¸Šçš„ä¾¿åˆ©</li>
</ul>
<p>å¦‚æœçŸ­ç­”æ¡ˆæ€»è§‰å¾—æ˜¯éš”é´æ”ç—’ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦é—®ä»¥ä¸‹å­é—®é¢˜ï¼š</p>
<ol>
<li>æ—¢ç„¶ Associated Type æ˜¯æ³›å‹çš„å­æ¦‚å¿µï¼Œé‚£ä¹ˆ Associated Type å’Œ Rust æ³›å‹æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯ Input Type å’Œ Output Typeï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆå¸¦æœ‰ Associated Type çš„ Trait åªèƒ½è¢«ä¸€ä¸ªç±»å‹<code>impl</code> ä¸€æ¬¡ï¼Ÿ</li>
<li>æ™®é€šæ³›å‹å¯ä»¥ä»£æ›¿ Associated Type å—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦ Associated Typeï¼Ÿ</li>
</ol>
<p>å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒä»¬çš„ä¸åŒä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p>
<ul>
<li>
<p>æ™®é€šæ³›å‹å¯ä»¥ç”¨äº Trait, Structå’Œå‡½æ•°ï¼Œä½†æ˜¯ Associated Type åªèƒ½ä¸ Trait ç»‘å®šã€‚</p>
</li>
<li>
<p>å¸¦æœ‰ Associated Type çš„ Trait åªèƒ½è¢«ä¸€ä¸ªç±»å‹<code>impl</code> ä¸€æ¬¡ï¼Œä½†æ˜¯å¸¦æœ‰æ™®é€šæ³›å‹çš„ Trait å¯ä»¥æœ‰å¤šä¸ª<code>impl</code>ï¼Œä¾‹å¦‚</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// æ™®é€šæ³›å‹ + Trait
pub trait GiveMeSomething&lt;T: Clone&gt; {
    fn get_something(&amp;self) -&gt; T;
}

// Associated Type + Trait
pub trait GiveMeData {
    type Data;
    fn get_some_data(&amp;self) -&gt; Self::Data;
}

// æ™®é€šæ³›å‹ + Struct
pub struct Something&lt;T: Clone&gt; {
    data: T,
}

// ä¸€ä¸ª struct å¯ä»¥æœ‰å¤šä¸ª GiveMeSomething&lt;T&gt; çš„ impl
impl&lt;T: Clone&gt; GiveMeSomething&lt;u8&gt; for Something&lt;T&gt; {
    fn get_something(&amp;self) -&gt; u8 {
        1
    }
}

impl&lt;T: Clone&gt; GiveMeSomething&lt;i32&gt; for Something&lt;T&gt; {
    fn get_something(&amp;self) -&gt; i32 {
        -1
    }
}


impl&lt;T: Clone&gt; Something&lt;T&gt; {
    // æ™®é€šæ³›å‹ + å‡½æ•°
    pub fn get_data(&amp;self) -&gt; T {
        self.data.clone()
    }
}

// ä¸€ä¸ª struct åªèƒ½æœ‰ä¸€ä¸ª GiveMeData çš„ impl
impl GiveMeData for Something&lt;u8&gt; {
    type Data = u8;

    fn get_some_data(&amp;self) -&gt; Self::Data {
        self.data
    }
}
<span class="boring">}
</span></code></pre></pre>
</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬æŠŠæ³›å‹çš„ç±»å‹ï¼ˆä¹Ÿå°±æ˜¯<code>&lt;T&gt;</code>ä¸­çš„<code>T</code>ï¼‰ä¹Ÿä½œä¸ºè¾“å…¥çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æŠŠ<code>get_data()</code>çš„è¾“å…¥çœ‹æˆæ˜¯<code>(T, &amp;self)</code>ï¼ŒæŠŠå®ƒçš„è¾“å‡ºçœ‹æˆæ˜¯<code>(T, T)</code>ï¼Œç¬¬ä¸€ä¸ª<code>T</code>æ˜¯ç±»å‹ï¼Œç¬¬äºŒä¸ª<code>T</code>æ˜¯æŒ‡å±äºè¿™ä¸ªç±»å‹çš„å€¼ã€‚</p>
<p>å‡å¦‚è¯´æˆ‘ä»¬æœ‰ä¸€ä¸ª<code>Something&lt;u8&gt;</code>çš„ç¤ºä¾‹ï¼Œå®ƒå­˜ç€<code>data = 1</code>ï¼Œé‚£ä¹ˆå®ƒçš„<code>get_data()</code>çš„è¾“å…¥å°±æ˜¯<code>(u8, &amp;self)</code>ï¼Œè¾“å‡ºå°±æ˜¯<code>(u8, 1)</code>ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¾ˆç®€å•çš„ï¼Œè¾“å…¥çš„ç±»å‹å°±æ˜¯ Input Typeï¼Œè¾“å‡ºçš„ç±»å‹å°±æ˜¯ Output Typeï¼Œä¹Ÿå°±æ˜¯ï¼Œå‡ºç°åœ¨å‚æ•°çš„ç±»å‹æ˜¯ Input Typeï¼Œå‡ºç°åœ¨è¿”å›å€¼çš„ç±»å‹æ˜¯ Output Typeã€‚</p>
<p>è‡³äºç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå¸¦æœ‰ Associated Type çš„ Trait åªèƒ½è¢«ä¸€ä¸ªç±»å‹<code>impl</code> ä¸€æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å®é™…çš„ä¾‹å­ã€‚å…¸å‹çš„ä¾‹å­å°±æ˜¯ä¸Šé¢çš„<code>pub trait Iterator</code>ã€‚å¯¹äº<code>Iterator</code>ï¼Œå¾ˆè‡ªç„¶çš„ï¼Œæˆ‘ä»¬æƒ³è¦éå†æŸä¸ªå®ä¾‹çš„æ‰€æœ‰çš„å€¼ï¼Œé‚£ä¹ˆè¿™äº›å€¼åªæœ‰ä¸€ä¸ªç±»å‹ï¼Œæ‰€ä»¥å¯¹äºä¸€ä¸ªç±»å‹æ¥è¯´ï¼Œè¿™ä¸ª Trait åªèƒ½è¢«<code>impl</code>ä¸€æ¬¡ã€‚</p>
<p>ç¬¬å››ä¸ªé—®é¢˜å’Œç¬¬ä¸‰ä¸ªé—®é¢˜ç´§å¯†ç›¸å…³ã€‚å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬èƒ½äººä¸ºåœ°ä¿è¯å¸¦æœ‰æ™®é€šæ³›å‹çš„ Trait åªè¢«ä¸€ä¸ªç±»å‹ <code>impl</code> ä¸€æ¬¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨æ™®é€šæ³›å‹ä»£æ›¿ Associated Typeã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦å‘æ˜ä¸€ä¸ª Associated Type å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€ä¸ªç†ç”±æ˜¯æœ€ç®€å•çš„ï¼Œä½ ä¸èƒ½äººä¸ºåœ°ä¿è¯å¸¦æœ‰æ™®é€šæ³›å‹çš„ Trait åªè¢«ä¸€ä¸ªç±»å‹ <code>impl</code> ä¸€æ¬¡ã€‚ä¸‡ä¸€ä¸€ä¸ªå®ä¹ ç”Ÿä¸æ‡‚ï¼Œä¸ºäº†æ–¹ä¾¿å°±éšæ‰‹åŠ å¤šäº†ä¸€ä¸ª<code>impl</code>å‘¢ï¼Ÿå‡å¦‚è¯´è¿™ä¸ªä¹Œé¾™å‘ç”Ÿåœ¨<code>Iterator</code>è¿™ä¸ª Trait ä¸Šé¢ï¼Œè€Œæ°å¥½ä½ ä¹Ÿåœ¨ç”¨ç€å®ƒï¼ˆä¾‹å¦‚<code>for item in my_custom_list {}</code>ï¼‰ï¼Œé‚£ä¹ˆ<code>rustc</code>ä¼šæŠ±æ€¨ä¸çŸ¥é“ç”¨å“ªä¸ª<code>impl</code>ï¼Œç„¶åä¸€ä¸ªç¼–è¯‘é”™è¯¯å°±äº§ç”Ÿäº†ã€‚å¦‚æœä½ æƒ³<code>rustc</code>å¸®ä½ æ£€æŸ¥å¹¶ä¿è¯è¿™ä¸ªå¸¦æœ‰æ™®é€šæ³›å‹çš„ Trait åªè¢«ä¸€ä¸ªç±»å‹ <code>impl</code> ä¸€æ¬¡ï¼Œé‚£ä¹ˆè¿™å°±å®é™…ä¸Šå˜æˆäº† Associated Type äº†ã€‚</p>
<p>æ›´å¤šçš„ç†ç”±æˆ‘ä»¬éœ€è¦ä¸¾ä¸ªä¾‹å­ã€‚Rust RFC Book é‡Œçš„<a href="https://rust-lang.github.io/rfcs/0195-associated-items.html">ä¾‹å­</a>å·²ç»éå¸¸å¥½äº†ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œç®€è¦ç¿»è¯‘ä¸€ä¸‹ï¼Œå¹¶ä¸”è¡¥å……ä¸€äº›å†…å®¹ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦å»ºå›¾ï¼Œå¹¶ä¸”è¡¨è¾¾æˆä¸€ä¸ª Trait <code>Graph</code>ã€‚å¦‚æœä»…ä»…ä½¿ç”¨æ™®é€šæ³›å‹ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆ</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// N å’Œ E æ˜¯èŠ‚ç‚¹å’Œè¾¹çš„ç±»å‹
trait Graph&lt;N, E&gt; {
    fn has_edge(&amp;self, &amp;N, &amp;N) -&gt; bool;
    ...
}
<span class="boring">}
</span></code></pre></pre>
<p>ä½†æ˜¯å¦‚æœè¿™æ ·å†™çš„è¯ï¼Œä¸€ä¸ªç±»å‹å¯ä»¥æœ‰å¤šä¸ª<code>Graph</code>çš„<code>impl</code>ï¼Œå¹¶ä¸”æ¯ä¸ª<code>impl</code> çš„ <code>N</code> å’Œ <code>E</code> éƒ½ä¸ä¸€æ ·ã€‚è¿™å°±æœ‰ç‚¹è¯¡å¼‚äº†ï¼Œå› ä¸ºå¯¹äºä¸€ä¸ªå®é™…çš„å›¾ï¼Œå®ƒçš„èŠ‚ç‚¹å’Œè¾¹çš„ç±»å‹æ˜¯å”¯ä¸€ç¡®å®šçš„ã€‚å¹¶ä¸”å¾ˆè‡ªç„¶åœ°ï¼Œ<code>N</code>å’Œ<code>E</code>è¿™ä¸¤ä¸ªç±»å‹å°±åº”è¯¥å’Œ<code>Graph</code>ç»‘å®šåœ¨ä¸€èµ·ï¼Œæœ‰ä¸ªä»å±çš„å…³ç³»ã€‚</p>
<p>è€Œä¸”ï¼Œå‡å¦‚è¯´æˆ‘ä»¬è¦å†™ä¸ªå‡½æ•°ï¼Œè®¡ç®—ä¸¤èŠ‚ç‚¹é—´çš„è·ç¦»ï¼Œä½¿ç”¨æ™®é€šæ³›å‹ï¼Œæˆ‘ä»¬è¦è¿™æ ·å†™</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn distance&lt;N, E, G: Graph&lt;N, E&gt;&gt;(graph: &amp;G, start: &amp;N, end: &amp;N) -&gt; uint { ... }
<span class="boring">}
</span></code></pre></pre>
<p>å‰é¢æ³›å‹çš„éƒ¨åˆ†å°±ä¼šæœ‰ä¸€é•¿ä¸²ï¼Œå°±æ˜¯<code>&lt;N, E, G&lt;N, E&gt;&gt;</code>ï¼Œå¦‚æœä¸€ä¸ª Trait æœ‰å¥½å‡ ä¸ªæ³›å‹ï¼Œé‚£ä¹ˆæƒ…å†µå°±æ›´ç³Ÿäº†ï¼Œå¯èƒ½<code>&lt;&gt;</code>é‡Œçš„å†…å®¹å°±è¦å†™ä¸€è¡Œã€‚</p>
<p>è€Œå¦‚æœæˆ‘ä»¬ç”¨ Associated Typeï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Graph {
    type N;
    type E;
    fn has_edge(&amp;self, &amp;N, &amp;N) -&gt; bool;
}
<span class="boring">}
</span></code></pre></pre>
<p>ç„¶åè®¡ç®—è·ç¦»çš„å‡½æ•°å°±å¯ä»¥å†™æˆ</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn distance&lt;G: Graph&gt;(graph: &amp;G, start: &amp;G::N, end: &amp;G::N) -&gt; uint { ... }
<span class="boring">}
</span></code></pre></pre>
<p>è¿™æ ·ä»£ç å°±å˜å¾—æ›´åŠ ç®€æ´äº†ã€‚</p>
<p>å¦å¤–ï¼Œå¯¹æ¯”ä¸¤ä¸ª<code>distance</code>å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°æ ¹æœ¬å°±æ²¡ç”¨åˆ°ç±»å‹<code>E</code>ï¼Œä½†æ˜¯å› ä¸ºè¯­æ³•è¦æ±‚å¿…é¡»è¦å†™ä¸Šï¼Œè€Œç¬¬äºŒä¸ªç”¨<code>G::N</code>å°±è¡Œï¼Œå¯ä»¥ä¸ç”¨å†™ç”¨ä¸ä¸Šçš„<code>G::E</code>ã€‚</p>
<p>é™¤äº†å°‘å†™ç”¨ä¸ä¸Šçš„ä»£ç è¿™ä¸ªå¥½å¤„ä¹‹å¤–ï¼Œæˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™è¿˜æœ‰æ›´å¤šçµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚å‡å¦‚è¯´æˆ‘ä»¬è¦æ‹“å±•æˆ‘ä»¬çš„<code>Graph</code>ï¼Œå˜æˆ</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Graph{
    type N;
    type E;
    type A;
    type B;
    type C;
    fn has_edge(&amp;self, &amp;N, &amp;N) -&gt; bool;
}
<span class="boring">}
</span></code></pre></pre>
<p>å¦‚æœä½¿ç”¨æ™®é€šæ³›å‹çš„è¯ï¼Œç¬¬ä¸€ä¸ª<code>distance</code>å‡½æ•°å°±ä¸å¯é¿å…åœ°è¦åŠ ä¸Š<code>A, B, C</code>è¿™äº›æ³›å‹æ ‡è¯†ï¼Œå¦åˆ™ç¼–è¯‘å°±ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ Associated Type çš„è¯ï¼Œç¬¬äºŒä¸ª<code>distance</code>å‡½æ•°æ ¹æœ¬å°±ä¸ç”¨åŠ¨ã€‚</p>
<p>ç»¼ä¸Šï¼ŒRust çš„ Associated Type ä¸æ˜¯æ™®é€šæ³›å‹çš„è¯­æ³•ç³–ï¼Œè€Œæ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„ã€èƒ½å¤Ÿè§£å†³å®é™…é—®é¢˜å¹¶ä¸”ä¼˜åŒ–ä»£ç çš„å®ç°ã€‚</p>
<h2 id="ç›¸å…³é“¾æ¥åŠå‚è€ƒé“¾æ¥"><a class="header" href="#ç›¸å…³é“¾æ¥åŠå‚è€ƒé“¾æ¥">ç›¸å…³é“¾æ¥åŠå‚è€ƒé“¾æ¥</a></h2>
<ul>
<li>Associated Type çš„ <a href="https://rust-lang.github.io/rfcs/0195-associated-items.html">Rust RFC</a>ï¼Œé‡Œé¢æœ‰æ›´åŠ è¯¦ç»†çš„è§£é‡Šï¼Œå¹¶ä¸”è¿˜åˆ—ä¸¾äº†Associated Type å¦å¤–ä¸¤ä¸ªä¼˜ç‚¹ï¼ˆè™½ç„¶å¯¹åº”ç”¨å¼€å‘è€…å½±å“ä¸å¤§ï¼‰</li>
<li>Rust Forum é‡Œçš„<a href="https://users.rust-lang.org/t/type-parameter-versus-type-alias-in-trait/67418">ç›¸å…³è®¨è®ºå¸–å­</a></li>
<li>Rust Book é‡Œçš„<a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html">ç›¸å…³ç« èŠ‚</a></li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="è®¾è®¡é€‰æ‹©"><a class="header" href="#è®¾è®¡é€‰æ‹©">è®¾è®¡é€‰æ‹©</a></h1>
<p>ä¸ºä»€ä¹ˆ Rust æ˜¯è¿‡ç¨‹å¼ç¼–ç¨‹è¯­è¨€ä¸­çš„æ¸…æµï¼ˆæˆ–è€…å¥‡è‘©ï¼‰ï¼Ÿä¸ºä»€ä¹ˆ Rust è¢«ç§°ä¸ºæ˜¯åå¤šå¹´çš„å·¥ç¨‹å®è·µçš„ç»“æ™¶ï¼Ÿ</p>
<p>å®ƒçš„è®¾è®¡å–èˆä¼šå‘Šè¯‰æˆ‘ä»¬ï¼ˆéƒ¨åˆ†ï¼‰ç­”æ¡ˆã€‚</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="ä¸ºä»€ä¹ˆæ²¡æœ‰ç»§æ‰¿"><a class="header" href="#ä¸ºä»€ä¹ˆæ²¡æœ‰ç»§æ‰¿">ä¸ºä»€ä¹ˆæ²¡æœ‰ç»§æ‰¿ï¼Ÿ</a></h1>
<h2 id="èƒŒæ™¯-1"><a class="header" href="#èƒŒæ™¯-1">èƒŒæ™¯</a></h2>
<p>ç»§æ‰¿å¸¸å¸¸ç”¨äºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸­ï¼Œé€šè¿‡ç»§æ‰¿ï¼Œä¸€ä¸ªå­ç±»å¯ä»¥è·å¾—çˆ¶ç±»çš„éƒ¨åˆ†ï¼ˆæˆ–å…¨éƒ¨ï¼‰çš„å±æ€§ã€æ•°æ®å’Œæ–¹æ³•ã€‚ç»§æ‰¿åˆå¯ä»¥åˆ†æˆå•ç»§æ‰¿å’Œå¤šç»§æ‰¿ã€‚ä¾‹å¦‚ï¼Œåœ¨ Java ä¸­ï¼Œå­ç±»åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œæ‰€ä»¥å«å•ç»§æ‰¿ï¼Œè€Œåœ¨ C++ç­‰è¯­è¨€ä¸­ï¼Œä¸€ä¸ªå­ç±»å¯ä»¥æœ‰å¤šä¸ªçˆ¶ç±»ï¼Œæ‰€ä»¥å«å¤šç»§æ‰¿ã€‚</p>
<h2 id="ç­”æ¡ˆ-1"><a class="header" href="#ç­”æ¡ˆ-1">ç­”æ¡ˆ</a></h2>
<p>ä¸ºä»€ä¹ˆ Rust æ²¡æœ‰ç»§æ‰¿ï¼Ÿ</p>
<p>å¤ªé•¿ä¸çœ‹ç‰ˆå°±æ˜¯ï¼ˆä»<a href="https://doc.rust-lang.org/book/ch17-01-what-is-oo.html">Rust Book</a>æ‘˜å½•ï¼‰ï¼š</p>
<ul>
<li>ç»§æ‰¿æœ‰æ—¶å€™ä¼šå…±äº«è¿‡å¤šä¸œè¥¿ï¼ˆå¦‚ç”¨ä¸ä¸Šçš„å±æ€§ã€æ•°æ®ã€æ–¹æ³•ç­‰ï¼‰ã€‚æœ‰æ—¶å€™å­ç±»å¹¶ä¸éœ€è¦çˆ¶ç±»çš„æ‰€æœ‰ä¸œè¥¿ï¼ˆäººä¹Ÿæ˜¯ä¸€æ ·ï¼‰ã€‚</li>
<li>ç»§æ‰¿æœ‰ä¸€äº›é—®é¢˜éš¾ä»¥è§£å†³ã€‚</li>
<li>Rust ä¸éœ€è¦ç»§æ‰¿ä¹Ÿå¯ä»¥è¾¾åˆ°ç±»ä¼¼ç»§æ‰¿çš„ç›®çš„ï¼ˆä»£ç å…±äº«ã€å¤šæ€ï¼‰ã€‚</li>
</ul>
<p>é•¿ç­”æ¡ˆå°±æ˜¯çŸ­ç­”æ¡ˆçš„å®Œå…¨å±•å¼€ï¼Œä½†æ˜¯ä¸å…¶é—®ä¸ºä»€ä¹ˆä¸è¦ ï¼ˆâ€œWhy not?â€ï¼‰ï¼Œæˆ‘ä»¬å…ˆæ¥é—®ä¸€ä¸‹è‡ªå·±ï¼Œä¸ºä»€ä¹ˆè¦ï¼ˆâ€œWhy?â€ï¼‰ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆè¦æœ‰ç»§æ‰¿ï¼Ÿ</p>
<p>æœ‰çš„äººè¯´ï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ç‰¹æ€§ã€‚ä½†æ˜¯ï¼Œåœ¨ Erich Gamma, Richard Helm, Ralph Johnson å’Œ John Vlissides (AKA gang of four) çš„ä¹¦ã€ŠDesign Patterns: Elements of Reusable Object-Oriented Softwareã€‹ä¸­ï¼Œä»–ä»¬è¿™æ ·å®šä¹‰OOPï¼š</p>
<blockquote>
<p>Object-oriented programs are made up of objects. An <em>object</em> packages both data and the procedures that operate on that data. The procedures are typically called <em>methods</em> or <em>operations</em>.</p>
</blockquote>
<p>ä»–ä»¬å‹æ ¹æ²¡æåˆ°ç»§æ‰¿ã€‚ï¼ˆå¦‚æœæœ‰äººè´¨ç–‘æƒå¨æ€§çš„è¯ï¼Œå¯ä»¥æŸ¥æŸ¥ Gang of Fourï¼‰</p>
<p>å¼•ç”¨ Rust Book çš„è§‚ç‚¹ï¼Œç»§æ‰¿çš„ç›®çš„åªæœ‰ä¸¤ç‚¹ï¼š</p>
<ol>
<li>ä»£ç å¤ç”¨</li>
<li>å¤šæ€</li>
</ol>
<p>å…¶å®å¤šæ€åœ¨<strong>ä¸€å®šç¨‹åº¦</strong>ä¸Šä¹Ÿå¯ä»¥è¯´æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ï¼Œæ‰€ä»¥ç»ˆæçš„åŸå› è¿˜æ˜¯ä»£ cheng ç  xu å¯ yuan å¤ tou ç”¨ lanã€‚æ‰€ä»¥è¿™ä¹Ÿè¡¨ç°åœ¨ç»§æ‰¿çš„å…·ä½“å®ç°ä¸Šäº†ã€‚é€šè¿‡ç»§æ‰¿ï¼Œç¨‹åºå‘˜å¯ä»¥ä¸ç”¨å†™çˆ¶ç±»å·²ç»æœ‰çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å£°æ˜çˆ¶ç±»å·²ç»æœ‰çš„å±æ€§ï¼Œè¿™å°±è®©ä»£ç æ›´åŠ èƒ½è¢«å¤ç”¨äº†ã€‚</p>
<p>é‚£ä¹ˆçœ‹èµ·æ¥ç»§æ‰¿å…¨æ˜¯å¥½å¤„ï¼Œæ‰€ä»¥ç¨‹åºå‘˜å’Œç»§æ‰¿ forever and forever a 100 years!? </p>
<p>è¿™æ—¶å€™å­¦è¿‡è½¯ä»¶å·¥ç¨‹çš„åŒå­¦åº”è¯¥ä¼šæ¬å‡ºä¸€ä¸ªè¯æ¥åé©³äº†ï¼Œé‚£å°±æ˜¯â€œè€¦åˆâ€(Coupling)ã€‚â€œè€¦åˆâ€è¯´çš„æ˜¯ç»„ä»¶ä¹‹é—´çš„ä¾èµ–ç¨‹åº¦ï¼Œé‚£ä¹ˆï¼Œå¦‚æœæŠŠçˆ¶ç±»å’Œå­ç±»çœ‹æˆæ˜¯ä¸¤ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆä»–ä»¬ä¹‹é—´çš„è€¦åˆåº”è¯¥æ˜¯æœ€é«˜çš„ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–ç¨‹åº¦æœ€é«˜ã€‚è€Œé«˜è€¦åˆä¸€èˆ¬æ˜¯è®¤ä¸ºä¸å¥½çš„ï¼Œå°±ä¸å±•å¼€è®²äº†ã€‚ä¸¾ä¸ªä¸æ°å½“çš„ä¾‹å­ï¼Œå°æ—¶å€™ä¹°ä¸œè¥¿éƒ½è¦çˆ¸å¦ˆå‡ºé’±ï¼Œè€Œçˆ¸å¦ˆ diss ä½ åˆ°äº†æœ€åæ€»æ˜¯ä¼šå›åˆ°ä¸€å¥è¯â€œä½ åƒæˆ‘çš„ç©¿æˆ‘çš„è¿˜è¿™ä¹ˆä¸å¬è¯â€œï¼Œè€Œå°±ç®—å ç†çš„æ˜¯ä½ ï¼Œä¹Ÿåªèƒ½è®¤æ€‚ã€‚è¿™å°±æ˜¯é«˜è€¦åˆçš„åå¤„ğŸ¶</p>
<p>æ‰€ä»¥é¡ºç€é«˜è€¦åˆçš„åå¤„ï¼Œæˆ‘ä»¬æ¥åˆ°äº†ç»§æ‰¿æœºåˆ¶çš„åå¤„ï¼Œä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä¸ï¼ˆâ€Why notâ€œï¼‰ã€‚</p>
<p>é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªç†ç”±å°±æ˜¯é«˜è€¦åˆã€‚å¼•ç”³å‡ºæ¥çš„é—®é¢˜å°±æ˜¯ï¼Œæœ‰æ—¶å€™å­ç±»å¹¶ä¸éœ€è¦çˆ¶ç±»çš„æ‰€æœ‰ä¸œè¥¿ï¼Œä½†æ˜¯ç»§æ‰¿ä¸€è‚¡è„‘éƒ½æŠŠçˆ¶ç±»çš„ä¸œè¥¿å¡ç»™å­ç±»äº†ã€‚å¤§å®¶éƒ½çŸ¥é“ï¼Œæ²¡æœ‰å…è´¹çš„åˆé¤ï¼Œæ‰€ä»¥ç»§æ‰¿çš„ä¸œè¥¿ä¹Ÿä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚ä¾‹å¦‚ï¼Œç»§æ‰¿æ–¹æ³•ï¼Œä¸‡ä¸€å­ç±»éœ€è¦å†™ä¸€ä¸ªåŒåæ–¹æ³•ï¼Œä½†æ˜¯æœ‰ç€ä¸åŒçš„è¾“å…¥è¾“å‡ºæ€ä¹ˆåŠï¼Ÿæœ‰äººè¯´å¯ä»¥ç”¨é‡è½½ï¼Œä½†æ˜¯å¤æ‚åº¦åˆå¢åŠ äº†ã€‚</p>
<p>ç¬¬äºŒä¸ªï¼Œç»§æ‰¿æ–¹æ³•è¿˜æœ‰ä¸€äº›éš¾å ªçš„æƒ…å½¢ä¸èƒ½è§£å†³ã€‚ä¾‹å¦‚ï¼Œç»å…¸çš„åœ†-æ¤­åœ†é—®é¢˜ï¼ˆ<a href="https://en.wikipedia.org/wiki/Circle%E2%80%93ellipse_problem">Circle-Ellipse Problem</a>ï¼‰ã€‚å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ†æ˜¯æ¤­åœ†ï¼Œé‚£ä¹ˆï¼ŒæŒ‰ç…§ç»§æ‰¿çš„æ€è·¯ï¼Œåœ†å°±åº”è¯¥æ˜¯æ¤­åœ†çš„å­ç±»ã€‚åŒæ—¶æˆ‘ä»¬çŸ¥é“ï¼Œæ— è®ºæ¤­åœ†æ€ä¹ˆåœ¨ä¸»è½´ä¸Šä¼¸ç¼©ï¼ˆé™¤äº†é›¶å˜æ¢ï¼‰ï¼Œå®ƒä¾æ—§æ˜¯ä¸ªæ¤­åœ†ã€‚é‚£ä¹ˆæ¤­åœ†å°±åº”è¯¥æœ‰ä¸€ä¸ªæ–¹æ³•å«</p>
<p><code>Ellipse::stretch(stretch_principal_direction0:f32, stretch_principal_direction1:f32)</code></p>
<p>ç„¶è€Œï¼Œå¦‚æœåœ†ä¹Ÿç»§æ‰¿äº†è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰åœ†ä¼¸ç¼©äº†ä¹‹åè¿˜æ˜¯åœ†çš„å¥‡æ€ªæƒ…å½¢ã€‚è¿™åœ¨å®è·µä¸­å¾®ä¸è¶³é“ï¼ŒæŠ›ä¸ª Exception å°±å®Œäº†ï¼Œä½†æ˜¯è¿™æ˜¯ä½¿ç”¨ç»§æ‰¿å¸¦æ¥çš„ç†è®ºä¸Šçš„æ ¹æœ¬é—®é¢˜ä¹‹ä¸€ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªç†ç”±æ˜¯ï¼Œå¦‚æœä¸€ä¸ªç¼–ç¨‹è¯­è¨€å…è®¸å¤šç»§æ‰¿ï¼Œé‚£ä¹ˆè¿˜ä¼šæœ‰<a href="https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem">è±å½¢ç»§æ‰¿é—®é¢˜</a>ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p>
<p>æœ€åä¸€ä¸ªç†ç”±æ˜¯ï¼Œå½“ç»§æ‰¿çš„å±‚çº§è¿‡å¤šï¼Œè®°å¿†ã€ç®¡ç†ç»§æ‰¿ä¸‹æ¥çš„å±æ€§å’Œæ–¹æ³•å°±éå¸¸éº»çƒ¦ï¼Œä½¿å¾—ä»£ç æ›´éš¾è¯»æ‡‚ï¼Œæ›´éš¾ç†è§£ã€‚æˆ–è®¸æœ‰äººä¹Ÿæ›¾é‡åˆ°è¿‡æˆ‘è¿™æ ·çš„æƒ…å†µï¼Œæ¥æ‰‹æˆ–å­¦ä¹ åˆ«äººçš„ä»£ç çš„æ—¶å€™ï¼Œçœ‹åˆ°åˆ«äººåœ¨ä»£ç é‡Œç”¨äº†ä¸€ä¸ªå±æ€§æˆ–è€…æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å½“å‰ç±»ä¸­æ‰¾ä¸åˆ°ï¼Œæœ€åå‘ç°æ˜¯å®šä¹‰åœ¨äº†çˆ¶ç±»ä¸­ï¼ˆç”šè‡³çˆ¶ç±»çš„çˆ¶ç±»ï¼Œç”šè‡³æ›¾ç¥–çˆ¶ç±»ä¸­ï¼‰ã€‚è€Œå¦‚æœæƒ³è¦å®šä¹‰ä¸€ä¸ªå­ç±»ï¼Œå†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ²¡å‡†å°±æ˜¯åœ¨é‡å¤é€ è½®å­ï¼Œåˆ«äººæ—©æ—©å°±åœ¨ä½ ç»§æ‰¿çš„çˆ¶ç±»ï¼ˆæˆ–è€…ç¥–çˆ¶ç±»ï¼Œæ›¾ç¥–çˆ¶ç±»ï¼‰ä¸­å†™å¥½äº†ï¼Œåªæ˜¯ç”¨äº†ä¸€ä¸ªä¸åŒçš„åå­—ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªï¼Œå€¼å¾—åæ€çš„æ˜¯ï¼Œä¸ºä»€ä¹ˆç»§æ‰¿å°±ä¸€å®šä¼šæŠŠå±æ€§å’Œæ–¹æ³•éƒ½ç»§æ‰¿äº†ï¼Ÿå±æ€§æ˜¯ä¸€ä¸ªç±»éœ€è¦çš„æ•°æ®ï¼Œæ–¹æ³•æ˜¯ä¸€ä¸ªç±»çš„è¡Œä¸ºï¼Œæ•°æ®å’Œè¡Œä¸ºå¯èƒ½æœ‰å…³ä¹Ÿå¯èƒ½æ— å…³ï¼Œä¸ºä»€ä¹ˆè¦æ†ç»‘ä¸€èµ·ä½œä¸ºç»§æ‰¿å¤§ç¤¼åŒ…ï¼Ÿ</p>
<p>æ‰€ä»¥ï¼ŒåŸºäºä¸Šé¢çš„ç†ç”±ï¼ŒRust é€‰æ‹©å®Œå…¨æŠ›å¼€ç»§æ‰¿çš„æ¦‚å¿µï¼Œé‡æ–°å®¡è§†å¦‚ä½•æ›´å¥½åœ°å¤ç”¨ä»£ç ã€‚</p>
<p>é¦–å…ˆï¼Œå¯¹äºä»£ç å¤ç”¨ï¼ŒRust Book ä¸­æåˆ°å¯ä»¥ä½¿ç”¨<code>trait</code>ï¼Œå› ä¸º<code>trait</code>å¯ä»¥æœ‰é»˜è®¤å®ç°ï¼Œå¦‚æœä¸æƒ³é‡æ–°å†™ä»£ç ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨é»˜è®¤å®ç°å°±å¥½äº†ã€‚å¦å¤–<code>trait</code>è¿˜å¯ä»¥æœ‰Super Traitï¼ˆä»‹ç»è§ <a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html#using-supertraits-to-require-one-traits-functionality-within-another-trait">Rust Book - super trait</a>ï¼‰ï¼Œå°±å¯ä»¥å®šä¹‰<code>trait</code>ä¹‹é—´çš„å±‚çº§ã€‚æœ‰äººè¯´ï¼Œé‚£ Super Trait ä¸å°±æ˜¯åƒç»§æ‰¿äº†å—ï¼Ÿè¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨é™„å½•ä¸­è®¨è®ºã€‚</p>
<p>å¯¹äºå¤šæ€ï¼ŒRust Book é‡Œæå‡ºå¯ä»¥ä½¿ç”¨æ³›å‹åŠ  Trait Boundã€‚</p>
<blockquote>
<p>To many people, polymorphism is synonymous with inheritance. But itâ€™s actually a more general concept that refers to code that can work with data of multiple types. For inheritance, those types are generally subclasses.</p>
<p>Rust instead uses generics to abstract over different possible types and trait bounds to impose constraints on what those types must provide. This is sometimes called <em>bounded parametric polymorphism</em>.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯å¤šæ€å¯ä»¥ç”±æ³›å‹åŠ ä¸Š Trait çš„é™åˆ¶æ¥å®ç°ã€‚</p>
<p>éœ€è¦è¡¥å……çš„æ˜¯ï¼ŒRust Book è¯´çš„å¤šæ€æ›´å¤šçš„æ˜¯é™æ€å¤šæ€ï¼Œå°±æ˜¯ç¼–è¯‘æ—¶å¯ä»¥å®ç°çš„å¤šæ€ã€‚è€Œå¦‚æœæƒ³è¦å®ç°åƒ Java ä¸€æ ·çš„å¤šæ€ï¼ˆä¾‹å¦‚ï¼Œå‘ä¸€ä¸ª Vector é‡Œæ·»åŠ æœ‰ç€å…±åŒçˆ¶ç±»çš„ä¸åŒå­ç±»çš„å¯¹è±¡ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œæ—¶å¤šæ€ã€‚è€Œåœ¨ Rust ä¸­ï¼Œâ€è¿è¡Œæ—¶å¤šæ€â€œæ˜¯ç”± Dynamic Dispatch å’Œ <a href="https://doc.rust-lang.org/book/ch17-02-trait-objects.html#using-trait-objects-that-allow-for-values-of-different-types">Trait Object</a> å®ç°çš„ã€‚</p>
<p>è¿™æ ·åšï¼ŒRust é™ä½äº†ç»§æ‰¿çš„é«˜è€¦åˆã€‚ä¸€ä¸ªç±»å‹å®ç°ä¸€ä¸ª<code>trait</code>å¹¶ä¸ä¼šæŠŠä¸éœ€è¦çš„æ–¹æ³•ä¹Ÿç»§æ‰¿ä¸‹æ¥ï¼Œè€Œå› ä¸º<code>trait</code>ä¸å¸¦å±æ€§ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šç»§æ‰¿å±æ€§ã€‚</p>
<p>è€Œæ²¡æœ‰äº†ç»§æ‰¿ï¼Œè±å½¢ç»§æ‰¿çš„æ•°æ®é—®é¢˜å½“ç„¶ä¹Ÿä¸å¤å­˜åœ¨äº†ã€‚è€Œ Super Trait å¸¦æ¥çš„æ–¹æ³•ä¸Šçš„è±å½¢ç»§æ‰¿é—®é¢˜æˆ‘ä»¬ä¹Ÿä¼šåœ¨é™„å½•è®¨è®ºã€‚</p>
<p>å¯¹äºåœ†-æ¤­åœ†é—®é¢˜ï¼Œåœ¨ Rust ä¸­<code>struct Circle</code>å¯ä»¥åŒ…å«ä¸€ä¸ª<code>Ellipse</code>çš„å±æ€§ï¼Œä½†æ˜¯å¯ä»¥é€‰æ‹©ä¸æŠŠä¸€äº›æ¤­åœ†çš„æ–¹æ³•æš´éœ²å‡ºæ¥ï¼Œè¿™å°±è§£å†³äº†åœ†-æ¤­åœ†é—®é¢˜ã€‚å°±åƒè¿™æ ·:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Ellipse{
    // zip
}
impl Ellipse{
    pub fn area(&amp;self){
        // zip
    }
    pub fn stretch(&amp;mut self){
        // zip
    }
}
pub struct Circle{
    e: Ellipse
}

impl Circle{
    pub fn area(&amp;self){
        self.e.area()
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>äº‹å®ä¸Šï¼ŒRust çš„ç¼–ç¨‹å»ºæ¨¡æ¨¡å¼æ›´åƒæ˜¯ç»„åˆï¼ˆCompositionï¼‰ è€Œä¸æ˜¯ç»§æ‰¿ï¼ˆInheritanceï¼‰ã€‚ç»§æ‰¿ä½¿ç”¨çš„æ˜¯éšå¼â€å¤åˆ¶ä»£ç â€œï¼Œè€Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¨‹åºå‘˜è¦æ˜¾å¼åœ°åœ¨<code>Circle::area</code>ä¸­è°ƒç”¨<code>Ellipse::area</code>ã€‚è™½ç„¶å¤šä½™çš„ä»£ç å†™å¤šäº†ä¸€ç‚¹ç‚¹ï¼Œä½†æ˜¯å¯ä»¥æ¸…æ™°åœ°æŒ‡å‡ºä¾èµ–å±‚çº§ã€‚</p>
<p>è¿™æ ·ï¼Œå°±ç®— Composition çš„å±‚çº§å†å¤šï¼Œçœ‹ä»£ç çš„æ—¶å€™æ€»èƒ½è¿½è¸ªå›åŸæ¥çš„å®ç°ï¼Œå°±åƒæ˜¯ä¸Šé¢<code>Circle::area</code>åˆ°<code>Ellipse::area</code>ä¸€æ ·ã€‚è™½ç„¶å±‚çº§è¿‡å¤šæ—¶ï¼Œéš¾ä»¥ç®¡ç†ä»£ç çš„é—®é¢˜ä¾æ—§å­˜åœ¨ï¼Œä½†æ˜¯è‡³å°‘å¯ä»¥å‡ç¼“ä¸€ç‚¹ã€‚</p>
<p>ç»¼ä¸Šï¼ŒRust æŠ›å¼ƒäº†ç»§æ‰¿ï¼Œé€‰æ‹©äº†ç»“åˆ<code>trait</code>ã€æ³›å‹å’ŒTrait Bound çš„ç»„åˆï¼ˆCompositionï¼‰æ¨¡å¼ï¼Œè§£å†³äº†å¤§éƒ¨åˆ†ç»§æ‰¿å¸¦æ¥çš„é—®é¢˜ï¼ŒåŒæ—¶å°½é‡ä¸å¼•å…¥å¤ªå¤šçš„æ–°é—®é¢˜ã€æ–°é™åˆ¶ï¼Œæé«˜çµæ´»åº¦çš„åŒæ—¶ä¹Ÿå°½é‡ä¿æŒäº†ä»£ç çš„å¯å¤ç”¨æ€§ã€‚</p>
<h2 id="ç›¸å…³é“¾æ¥"><a class="header" href="#ç›¸å…³é“¾æ¥">ç›¸å…³é“¾æ¥</a></h2>
<ul>
<li>Rust ç¤¾åŒºä¸­çš„è®¨è®º <a href="https://users.rust-lang.org/t/how-to-implement-inheritance-like-feature-for-rust/31159">how to implement inheritance-like feature for rust</a></li>
<li>Rust Bookç›¸å…³é“¾æ¥ï¼Œè¯·çœ‹æ­£æ–‡ä¸­çš„é“¾æ¥</li>
</ul>
<h2 id="é™„å½•"><a class="header" href="#é™„å½•">é™„å½•</a></h2>
<h3 id="super-trait-å’Œç»§æ‰¿æœ‰ä»€ä¹ˆä¸åŒ"><a class="header" href="#super-trait-å’Œç»§æ‰¿æœ‰ä»€ä¹ˆä¸åŒ">Super Trait å’Œç»§æ‰¿æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</a></h3>
<ul>
<li>
<p>Super Trait è¿˜æ˜¯å±äº Traitï¼Œæ‰€ä»¥å®ƒä¸èƒ½å®šä¹‰å±æ€§ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šâ€ç»§æ‰¿â€œå±æ€§ã€‚</p>
</li>
<li>
<p>Super Trait å®šä¹‰çš„æ˜¯è¡Œä¸ºï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç±»å‹åº”è¯¥æœ‰çš„æ–¹æ³•ï¼Œç”±æ­¤å½¢æˆçš„ Trait çš„å±‚çº§æ˜¯è¡Œä¸ºä¸Šçš„å±‚çº§ã€‚è€Œç»§æ‰¿ä¸ä»…ä¼šç»§æ‰¿æ–¹æ³•ï¼Œè¿˜ä¼šç»§æ‰¿å±æ€§ï¼Œå¼•å…¥äº†æ›´å¤šè€¦åˆï¼Œè¿˜ä¼šå¼•å…¥è±å½¢ç»§æ‰¿ä¸­çš„æ•°æ®é—®é¢˜ã€‚</p>
</li>
<li>
<p>è™½ç„¶ super trait åŒæ ·ä¼šæœ‰è±å½¢ç»§æ‰¿é—®é¢˜ï¼Œä½†æ˜¯ä¸åƒæ•°æ®çš„é—®é¢˜é‚£æ ·éš¾ä»¥è§£å†³ï¼Œæ–¹æ³•ä¸Šçš„å†²çªç”¨<a href="https://doc.rust-lang.org/book/ch19-03-advanced-traits.html#fully-qualified-syntax-for-disambiguation-calling-methods-with-the-same-name">Fully qualified syntax</a>å°±å¯ä»¥è§£å†³ã€‚ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust">pub trait Say {
    fn say_something(&amp;self) {
        println!(&quot;yummy&quot;)
    }
}

pub trait EatApple: Eat + Say {
    fn eat_something(&amp;self) {
        println!(&quot;Eat something, maybe Apple?&quot;);
        self.say_something()
    }
    fn eat_apple(&amp;self) {
        println!(&quot;Eat Apple&quot;)
    }
}

pub trait EatPear: Eat + Say {
    fn eat_something(&amp;self) {
        println!(&quot;Eat something, maybe Pear?&quot;);
        self.say_something()
    }
    fn eat_pear(&amp;self) {
        println!(&quot;Eat pear&quot;)
    }
}

struct People;

impl Eat for People {}

impl Say for People {}

impl EatPear for People {}

fn main() {
    let p = People;
    Eat::eat_something(&amp;p); // OK
    p.eat_something() // compile error
}
</code></pre></pre>
</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="ä¸ºä»€ä¹ˆæ²¡æœ‰å…¨å±€å˜é‡"><a class="header" href="#ä¸ºä»€ä¹ˆæ²¡æœ‰å…¨å±€å˜é‡">ä¸ºä»€ä¹ˆæ²¡æœ‰å…¨å±€å˜é‡ï¼Ÿ</a></h1>
<p>Comingâ€¦â€¦</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="ä¸ºä»€ä¹ˆæ²¡æœ‰é‡è½½"><a class="header" href="#ä¸ºä»€ä¹ˆæ²¡æœ‰é‡è½½">ä¸ºä»€ä¹ˆæ²¡æœ‰é‡è½½ï¼Ÿ</a></h1>
<p>Comingâ€¦â€¦.</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="ä¸ºä»€ä¹ˆæ²¡æœ‰ç¼ºçœå‚æ•°"><a class="header" href="#ä¸ºä»€ä¹ˆæ²¡æœ‰ç¼ºçœå‚æ•°">ä¸ºä»€ä¹ˆæ²¡æœ‰ç¼ºçœå‚æ•°ï¼Ÿ</a></h1>
<p>Coming</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
